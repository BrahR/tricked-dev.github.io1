---
import { Footer, Nav } from "./chakra/lib";
import { Box } from "@chakra-ui/react";
import { SEO } from "astro-seo";
import Card from "./Card.astro"
const langMeta = { en: { description: `Hello i'm Tricked im a Rust and Typescript developer, my github is Tricked-dev` }, nl: { description: `Hallo ik ben Tricked ik ben een Rust en Typescript developer, mijn github is Tricked-dev` } };
//@ts-ignore - PLease
const { Links, TextValue, DontforceWidth = false, lang, ...customMeta } = { ...{lang: Astro.request.url.pathname.split("/")[0] || "en"}, ...Astro.request.params, ...Astro.props };
let split = Astro.site.href.split("/");
let name = split[split.length - 1] == "index" ? split[split.length - 2] : split[split.length - 1];

const meta = {
  lang: lang,
  title: "Tricked.pro",
  title_long: `Tricked.pro ${name}`,
  type: "website",
  themeColor: "#317EFB",
  keywords: "javascript typescript programming rust discord matrix",
  viewport: "width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no",
  icon: "favicon.ico",
  // image: `/cards/${router.route.replace('/', '').replace(/\//gim, '_')}.png`,
  ...langMeta["en"],
  ...langMeta[lang as keyof typeof langMeta],
  ...customMeta,
};
---
<Card/>
<html lang={meta.lang}>
  <head>
    <meta charset="utf-8" />
    <style lang="postcss">
      @tailwind base;
      @tailwind components;
      @tailwind utilities;
    </style>
    <link rel="stylesheet" href={Astro.resolve("../css/tailwind.css")} />
    <meta name="msapplication-TileColor" content={meta.themeColor} />
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png" />

    <SEO
      title={meta.title}
      description={meta.description}
      locale={meta.lang}
      openGraph={{
        basic: {
          title: meta.title_long,
          description: meta.description,
          type: meta.type,
          image: `/cards/${Astro.request.url.pathname.replace("/", "").replace(/\//gim, "_").slice(0, -1)}.png`,
        },
        image: {
          alt: "Site card",
        },
      }}
      extend={{
        link: [
          { rel: "icon", type: "image/x-icon", href: "/favicon.ico" },
          { rel: "apple-touch-icon", sizes: "57x57", href: "/assets/icons/apple-icon-57x57.png" },
          { rel: "apple-touch-icon", sizes: "60x60", href: "/assets/icons/apple-icon-60x60.png" },
          { rel: "apple-touch-icon", sizes: "72x72", href: "/assets/icons/apple-icon-72x72.png" },
          { rel: "apple-touch-icon", sizes: "76x76", href: "/assets/icons/apple-icon-76x76.png" },
          { rel: "apple-touch-icon", sizes: "114x114", href: "/assets/icons/apple-icon-114x114.png" },
          { rel: "apple-touch-icon", sizes: "120x120", href: "/assets/icons/apple-icon-120x120.png" },
          { rel: "apple-touch-icon", sizes: "144x144", href: "/assets/icons/apple-icon-144x144.png" },
          { rel: "apple-touch-icon", sizes: "152x152", href: "/assets/icons/apple-icon-152x152.png" },
          { rel: "apple-touch-icon", sizes: "180x180", href: "/assets/icons/apple-icon-180x180.png" },
          { rel: "icon", type: "image/png", sizes: "192x192", href: "/assets/icons/android-icon-192x192.png" },
          { rel: "icon", type: "image/png", sizes: "32x32", href: "/assets/icons/favicon-32x32.png" },
          { rel: "icon", type: "image/png", sizes: "96x96", href: "/assets/icons/favicon-96x96.png" },
          { rel: "icon", type: "image/png", sizes: "16x16", href: "/assets/icons/favicon-16x16.png" },
          { rel: "manifest", href: "/manifest.json" },
          { href: "/assets/icons/icon-48x48.png", rel: "icon", type: "image/png", sizes: "48x48" },
          { href: "/assets/icons/icon-72x72.png", rel: "icon", type: "image/png", sizes: "72x72" },
          { rel: "apple-touch-icon", href: "/assets/icons/icon-512x512.png" },
        ],
        meta: [
          { name: "viewport", content: "width=device-width" },
          { name: "keywords", content: meta.keywords },
          { name: "theme-color", content: meta.themeColor },
          { name: "msapplication-TileColor", content: meta.themeColor },
          { name: "msapplication-TileImage", content: "/ms-icon-144x144.png" },
        ],
      }}
    />
  </head>
  <Nav {lang} links={Links} {lang} {TextValue} client:visible />
  <main>
    <Box alignItems="stretch" width="100%" maxW={!DontforceWidth ? "80rem" : "none"} margin="auto" padding={!DontforceWidth ? "4px 10px 40px" : "none"}>
      <slot  />
    </Box> 
  </main>
  <Footer {lang} />
</html>
